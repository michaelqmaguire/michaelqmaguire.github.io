---
layout: post
title: How do I identify the maximum number of diagnoses or procedures across data sets?
subtitle: It gets a little hard trying to remember which years shift around...and PROC CONTENTS can be a bit tedious.
tags: [SAS]
---

One of the first issues that I encountered when working with claims data here at POP was how the diagnoses can vary from year to year and file to file. I could easily see this becoming quite cumbersome if you're pulling files from 2006 - 2019.

Again, I've never used claims data before, but having to scroll through pages of PROC CONTENTS can get a bit overwhelming.

One solution I came up with was parsing through the dictionary tables that carry metadata about the files in your library.

First, let's create a bunch of fake data sets with varying numbers of DX's to mimic the Truven data sets. I'm going to call this macro "fake_claims".

```sas
                                	/*  ------------------------------------------------------------------------------------------- */
%macro fake_claims;			/*	Begin macro that will create 10 data sets with differing numbers of DX's.		*/
%do yr = 10 %to 20;			/* 	Setting yr macro variable to iterate from 10 (2010) to 20 (2020). 			*/
%if &yr. < 15 %then %do;		/* 	Begin %IF macro conditional processing. If data set is less than 2015 (arbitrary). 	*/
	%let n = 8;			/* 	Set macro variable 'n' to 8 (8 diagnoses)				                */
%end;					/* 	End the %IF macro conditional processing. 					        */
	%else %do;			/*	Begin %ELSE macro conditional processing. If greater than 2015, proceed...		*/
		%let n = 14;		/*	Set macro variable 'n' to 14.					                        */
	%end;				/*	end the %ELSE macro conditional processing.				             	*/
data 		work.cc_ip_svc_&yr; 	/* 	Below creates the actual data sets.				                        */
	array 	dx [&n.] dx1-dx&n.;	/* 	Create an array that will create the number of variables based on 'n'.			*/
run;					/* 	Run the data step.					                                */
%end;					/* 	End the %DO processing above.			  	                            	*/
%mend fake_claims;			/*	End the macro.										*/
                                	/*  ------------------------------------------------------------------------------------------- */
```
